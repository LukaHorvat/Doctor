<script>var bgColor = function (col) { return function (el) {
    var ids = el.dataset.refId.split(",");
    ids.forEach(function (id) {
        var els = document.getElementsByClassName("ref-id-" + id);
        for (var i = 0; i < els.length; ++i) {
            var item = els[i];
            item.style.backgroundColor = col;
        }
    });
}};

var hover = bgColor("rgba(255, 255, 0, 0.3)");

var unhover = bgColor("");
</script><style>@import url(http://fonts.googleapis.com/css?family=Open+Sans:400,300);
@import url(http://fonts.googleapis.com/css?family=Source+Code+Pro:300,400);

.container {
    width: 1000px;
    margin-left: auto;
    margin-right: auto;
}

.segment {
    width: 1000px;
}

.prose {
    width: 490px;
    float: left;
    padding: 5px;
    font-family: "Open Sans";
    font-weight: 300;
    font-size: 15;
}

.code, .code pre {
    font-family: "Source Code Pro";
    font-size: 12;
}

.code {
    width: 500px;
    float: left;
    overflow-x: hidden;
    font-weight: 300;
}

.code pre {
    font-weight: 400;
}

.code:hover {
    overflow-x: visible;
}

.code-ref {
    background-color: rgba(255, 255, 0, 0.17);
}

.code-ref:hover {
    background-color: rgba(255, 255, 0, 0.3);
}
</style><div class="container"><div class="prose">Execution starts in the <span class="code-ref-internal" data-ref-id="" onmouseover="hover(this)" onmouseout="unhover(this)">Main.hs</span> file.
<span class="code-ref" data-ref-id="0,1" onmouseover="hover(this)" onmouseout="unhover(this)">The command line arguments provide the location of the git repository (or a git URL) and the location
of the documentation that needs to be compiled.</span>
</div><div class="code"><div class="ref-id-0"><span>src/Main.hs</span><pre>manual :: String
manual = [str|
    USAGE:

    doctor &lt;path to git repo/git url&gt; &lt;path to docs&gt;
        The usual usage. Builds the documentation connecting the references to the specified repository.

    doctor /help
        Shows this page |]
</pre></div><div class="ref-id-1"><span>src/Main.hs</span><pre>main :: IO ()
main = do
    args &lt;- getArgs
    case args of
        [&quot;/help&quot;]   -&gt; putStrLn manual
        [prov, docs] -&gt; do
            files &lt;- getAbsDirectoryContents docs
            forM_ (filter isPhd files) $ \f -&gt; do
                eith &lt;- Docs.fromString &lt;$&gt; readFile f
                let phdOut = FP.dropExtension f `FP.addExtension` &quot;.phd&quot;
                let htmlOut = FP.dropExtension f `FP.addExtension` &quot;.html&quot;
                case eith of
                    Left err  -&gt; print err
                    Right doc -&gt; do
                        (doc', phd) &lt;- Comp.compile prov doc
                        Comp.phdToFile phdOut phd
                        writeFile htmlOut $ Html.render doc' phd
        _           -&gt; putStrLn &quot;Expected two command line arguments. Try /help.&quot;
</pre></div></div></div>